(()=>{"use strict";var e,t={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-btn",inactiveButtonClass:"modal__submit-btn_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},n=function(e,t,n){var o="".concat(t.id,"-error"),r=e.querySelector("#".concat(o));r.textContent="",t.classList.remove(n.inputErrorClass),r.classList.remove(n.errorClass)},o=function(e,t){e.classList.add(t.inactiveButtonClass),e.disabled=!0},r=function(e,t){e.classList.remove(t.inactiveButtonClass),e.disabled=!1},a=function(e,t,n){!function(e){return e.some(function(e){return!e.validity.valid})}(e)?r(t,n):o(t,n)},c=function(e,t){var r=Array.from(e.querySelectorAll(t.inputSelector)),a=e.querySelector(t.submitButtonSelector);r.forEach(function(o){n(e,o,t)}),o(a,t)},i=document.querySelector(".profile__edit-btn"),s=document.querySelector("#edit-profile-modal"),l=s.querySelector(".modal__close-btn"),u=document.forms["edit-profile-form"],d=u.querySelector("#profile-name-input"),m=u.querySelector("#profile-description-input"),p=document.querySelector(".profile__add-btn"),f=document.querySelector("#new-post-modal"),v=f.querySelector(".modal__close-btn"),_=document.forms["new-post-form"],y=_.querySelector("#image-link-input"),S=_.querySelector("#image-caption-input"),g=_.querySelector(".modal__submit-btn"),b=document.querySelector(".profile__name"),q=document.querySelector(".profile__description"),w=document.querySelector("#preview-modal"),h=w.querySelector(".modal__close-btn"),L=w.querySelector(".modal__image"),k=w.querySelector(".modal__caption"),E=document.querySelector("#card-template").content.querySelector(".card"),C=document.querySelector(".cards__list");function x(e){var t=E.cloneNode(!0),n=t.querySelector(".card__title"),o=t.querySelector(".card__image");o.src=e.link,o.alt=e.name,n.textContent=e.name;var r=t.querySelector(".card__like-button");return r.addEventListener("click",function(){r.classList.toggle("card__like-button_active")}),t.querySelector(".card__delete-button").addEventListener("click",function(){t.remove()}),o.addEventListener("click",function(){L.src=e.link,L.alt=e.name,k.textContent=e.name,j(w)}),t}function z(e){if("Escape"===e.key){var n=document.querySelector(".modal_is-opened");if(!n)return;"new-post-modal"===n.id&&(_.reset(),c(_,t)),A(n)}}function B(e){e.target.classList.contains("modal")&&("new-post-modal"===e.target.id&&(_.reset(),c(_,t)),A(e.target))}function j(e){e.classList.add("modal_is-opened"),document.addEventListener("keydown",z),e.addEventListener("mousedown",B)}function A(e){e.classList.remove("modal_is-opened"),document.removeEventListener("keydown",z),e.removeEventListener("mousedown",B)}h.addEventListener("click",function(){A(w)}),i.addEventListener("click",function(){d.value=b.textContent,m.value=q.textContent,c(u,t);var e=u.querySelector(t.submitButtonSelector);r(e,t),j(s)}),l.addEventListener("click",function(){A(s),c(u,t)}),p.addEventListener("click",function(){c(_,t),c(_,t),j(f)}),v.addEventListener("click",function(){_.reset(),c(_,t),A(f)}),u.addEventListener("submit",function(e){e.preventDefault(),b.textContent=d.value,q.textContent=m.value,A(s)}),_.addEventListener("submit",function(e){e.preventDefault();var n=x({name:S.value,link:y.value});C.prepend(n),_.reset(),c(_,t),o(g,t),A(f)}),[{name:"Vale Thorens",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/1-photo-by-moritz-feldmann-from-pexels.jpg"},{name:"Restaurant terrace",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/2-photo-by-ceiline-from-pexels.jpg"},{name:"An outdoor cafe",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/3-photo-by-tubanur-dogan-from-pexels.jpg"},{name:"A very long bridge, over the forest and through the trees",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/4-photo-by-maurice-laschet-from-pexels.jpg"},{name:"Tunnel with morning light",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/5-photo-by-van-anh-nguyen-from-pexels.jpg"},{name:"Mountain house",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/6-photo-by-moritz-feldmann-from-pexels.jpg"},{name:"Golden Gate Bridge",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/7-photo-by-griffin-wooldridge-from-pexels.jpg"}].forEach(function(e){var t=x(e);C.append(t)}),e=t,document.querySelectorAll(e.formSelector).forEach(function(t){!function(e,t){var o=Array.from(e.querySelectorAll(t.inputSelector)),r=e.querySelector(t.submitButtonSelector);a(o,r,t),o.forEach(function(c){c.addEventListener("input",function(){!function(e,t,o){t.validity.valid?n(e,t,o):function(e,t,n,o){var r="".concat(t.id,"-error"),a=e.querySelector("#".concat(r));a.textContent=n,t.classList.add(o.inputErrorClass),a.classList.add(o.errorClass)}(e,t,t.validationMessage,o)}(e,c,t),a(o,r,t)})})}(t,e)})})();